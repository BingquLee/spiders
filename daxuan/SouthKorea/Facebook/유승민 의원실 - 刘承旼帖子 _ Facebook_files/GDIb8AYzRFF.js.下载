if (self.CavalryLogger) { CavalryLogger.start_js(["QaioH"]); }

__d("VideoComposerContentTagsField.react",["ix","cx","fbt","FlexLayout.react","Image.react","React","SearchableEntry","Tooltip","VideoComposerDialogBasicActions","VideoComposerDialogBasicUtils","XUITokenizer.react","XUIText.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=8;c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.state={currentEntries:[],isFocused:!1,queryString:"",showFreeFormOption:!0},this.$6=function(a){if(this.$5(a))return;var c=this.props.entries.slice();if(this.$4())return;var d=a;a.getAuxiliaryData().isFreeForm&&(d=new(b("SearchableEntry"))({uniqueID:a.getUniqueID(),title:a.getUniqueID(),auxiliaryData:{isFreeForm:!0}}));c.push(d);this.$3(c)}.bind(this),this.$7=function(a){var b=this.props.entries.slice();this.$5(a)&&b.splice(b.indexOf(a),1);this.$3(b)}.bind(this),this.$8=function(){this.setState({isFocused:!0}),this.$2.focusInput()}.bind(this),this.$9=function(){this.setState({isFocused:!1})}.bind(this),this.$10=function(){this.setState({isFocused:!0})}.bind(this),this.$12=function(event){var a=event.target.value,b=this.$11(a,this.props.entries.concat(this.state.currentEntries));this.setState({showFreeFormOption:!b,queryString:a})}.bind(this),this.$13=function(a){var b=this.$11(this.state.queryString,a.concat(this.state.currentEntries));this.setState({showFreeFormOption:this.state.showFreeFormOption&&!b,currentEntries:a})}.bind(this),c}a.prototype.UNSAFE_componentWillMount=function(){this.$1=b("VideoComposerDialogBasicUtils").getContentTagSearchSource()};a.prototype.$3=function(a){b("VideoComposerDialogBasicActions").updateContentTags(a)};a.prototype.$4=function(){return this.props.entries.length>=k};a.prototype.$5=function(a){var b=a.getUniqueID(),c=a.getAuxiliaryData().isFreeForm,d=a.getTitle();a=this.props.entries;a=a.some(function(a){if(a.getUniqueID()===b)return!0;else if(c&&b===a.getTitle()||a.getAuxiliaryData().isFreeForm&&a.getUniqueID()===d)return!0;return!1});return a};a.prototype.$11=function(a,b){b=b.some(function(b){return a===b.getTitle()});return b};a.prototype.render=function(){var a=this.$1,c={};this.state.showFreeFormOption||(c[this.state.queryString]=new(b("SearchableEntry"))({uniqueID:this.state.queryString,title:this.state.queryString}));var d=null;this.props.entries.length>=k&&(d=b("React").createElement("div",{className:"_66na"},i._("\u6dfb\u52a0\u7684\u6807\u7b7e\u5df2\u8fbe\u5230\u4e0a\u9650\u3002")));var e=i._("\u8f93\u5165\u4e0e\u89c6\u9891\u76f8\u5173\u7684\u4e3b\u9898\uff0c\u7ed9\u89c6\u9891\u52a0\u4e0a\u6807\u7b7e\u3002\u6807\u7b7e\u6709\u52a9\u4e8e\u7528\u6237\u5728\u641c\u7d22\u548c\u6d4f\u89c8\u52a8\u6001\u6d88\u606f\u65f6\u627e\u5230\u4f60\u7684\u5e16\u5b50\u3002");return b("React").createElement("div",babelHelpers["extends"]({className:this.props.className},b("Tooltip").propsFor(this.state.isFocused?"":e),{onClick:this.$8,tabIndex:0,role:"textbox"}),b("React").createElement(b("FlexLayout.react"),{align:"stretch",className:"_k38"},b("React").createElement("div",babelHelpers["extends"]({},b("Tooltip").propsFor(e),{className:"_4vsq"}),b("React").createElement(b("Image.react"),{className:"_k39",src:g("423746")}),b("React").createElement(b("XUIText.react"),{size:"header4",weight:"bold",className:"_4vss"},i._("\u6807\u7b7e"))),b("React").createElement(b("XUITokenizer.react"),{className:"_k3b",entries:this.props.entries,excludedEntries:c,limit:k,placeholder:i._("\u6dfb\u52a0\u6807\u7b7e\uff0c\u65b9\u4fbf\u7528\u6237\u53d1\u73b0\u4f60\u7684\u89c6\u9891\uff0c\u4f8b\u5982\uff1a\u732b\u3001\u8fd0\u52a8\u3001\u94a2\u7434"),ref:function(a){return this.$2=a}.bind(this),searchSource:a,onInputBlur:this.$9,onInputFocus:this.$10,onEntriesFound:this.$13,onQueryStringChange:this.$12,onRemoveEntryAttempt:this.$7,onAddEntryAttempt:this.$6})),d)};e.exports=a}),null);