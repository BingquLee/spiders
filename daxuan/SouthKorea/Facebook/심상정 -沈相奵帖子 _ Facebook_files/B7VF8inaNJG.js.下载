if (self.CavalryLogger) { CavalryLogger.start_js(["5N07e"]); }

__d("VideoComposerFooterUploadActions.react",["cx","fbt","invariant","AutoScheduleUtils","CreateReviewableBCWhitelistInterceptDialog.react","DateConsts","DOM","FlexLayout.react","PopoverMenu.react","PostBackdateDialog.react","PostScheduleAndPostEndDialog.react","PublishingToolsWebdriverTestDataIDs","React","ReactComposerBoostedPostLazyButton.react","ReactDOM","ReactXUIMenu","ScheduleLiveVideoDialog.react","SimpleNUXMessage","SimpleNUXMessageTypes","Tooltip","VideoComposerAdBreakPrereviewPostMethod","VideoComposerDialogActions","VideoComposerDialogAdBreakActions","VideoComposerAdBreakPrereviewButtonNux.react","VideoComposerAdBreakPrereviewConfirmation.react","VideoComposerDialogConstants","VideoComposerDispatcher","VideoComposerPremiereStore","VideoComposerSaveAsDraftPrompt.react","VideoComposerWebdriverTestDataIDs","XUIButton.react","XUIPopoverButton.react","XUISpinner.react","keyMirror","LiftTimeUtils"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("LiftTimeUtils").MS_IN_SEC,l=b("ReactXUIMenu").Item,m=b("keyMirror")({AD_BREAK_SUBMIT_FOR_REVIEW:"",BACKDATE:"",PREMIERE:"",PUBLISH_NOW:"",SAVE_DRAFT:"",SCHEDULE:""});c=babelHelpers.inherits(a,b("React").Component);j=c&&c.prototype;function a(){var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=j.constructor).call.apply(a,[this].concat(e)),this.$1=h._("\u7f3a\u5c11\u6807\u9898"),this.$2=h._("\u5982\u9700\u53d1\u5e03\u89c6\u9891\uff0c\u8bf7\u9009\u62e9\u89c6\u9891\u7c7b\u578b"),this.$3=h._("\u5982\u9700\u4fdd\u5b58\u8349\u7a3f\uff0c\u8bf7\u9009\u62e9\u89c6\u9891\u7c7b\u578b"),this.$4=h._("\u5982\u9700\u63d0\u4ea4\u5ba1\u6838\uff0c\u8bf7\u9009\u62e9\u89c6\u9891\u7c7b\u578b"),this.$5=h._("\u89c6\u9891\u9700\u8981\u6dfb\u52a0\u6807\u9898\u624d\u80fd\u53d1\u5e03"),this.$6=h._("\u5982\u9700\u4fdd\u5b58\u8349\u7a3f\uff0c\u8bf7\u6dfb\u52a0\u6807\u9898"),this.$7=h._("\u89c6\u9891\u9700\u8981\u6dfb\u52a0\u6807\u9898\u624d\u80fd\u63d0\u4ea4\u5ba1\u6838"),this.$8=h._("\u9996\u64ad\u89c6\u9891\u5fc5\u987b\u5728\u52a8\u6001\u6d88\u606f\u4e2d\u64ad\u653e"),this.$9=h._("\u5982\u9700\u53d1\u8d77\u9996\u64ad\uff0c\u8bf7\u5728\u201c\u64ad\u653e\u8303\u56f4\u201d\u4e2d\u9009\u62e9\u201c\u52a8\u6001\u6d88\u606f\u201d"),this.$10=h._("\u9996\u64ad\u89c6\u9891\u65f6\u957f\u65e0\u6548"),this.$11=h._("\u89c6\u9891\u9996\u64ad\u65f6\u957f\u5fc5\u987b\u5728 30 \u79d2\u5230 4 \u5c0f\u65f6\u4e4b\u95f4"),this.$20=function(){var a=b("ReactDOM").render(b("React").createElement(b("PostScheduleAndPostEndDialog.react"),{defaultScheduledTimeDelta:b("VideoComposerDialogConstants").SCHEDULE_TIME_DELTA,timezoneStr:this.$23(),showExpire:!0,showPostEndDate:this.props.showPostEndDate,onSubmit:b("VideoComposerDialogActions").scheduleConfirm}),b("DOM").create("div"));a instanceof b("PostScheduleAndPostEndDialog.react")||i(0);a.show()}.bind(this),c}a.prototype.$12=function(){b("VideoComposerDialogActions").saveAsDraftAttempt()};a.prototype.$13=function(){this.$14()?this.$15(b("VideoComposerAdBreakPrereviewPostMethod").SUBMIT_FOR_PREREVIEW):b("VideoComposerDialogActions").submitForPrereview()};a.prototype.$16=function(){this.$14()?this.$17():b("VideoComposerDialogActions").publishPost()};a.prototype.$18=function(){this.$14()?this.$19():this.$20()};a.prototype.$21=function(){var a=b("ReactDOM").render(b("React").createElement(b("PostBackdateDialog.react"),{maxTime:Date.now()/k,minTime:this.props.minBackdateTime,onSubmit:b("VideoComposerDialogActions").backdateConfirm}),b("DOM").create("div"));a instanceof b("PostBackdateDialog.react")||i(0);a.show()};a.prototype.$22=function(){b("VideoComposerDispatcher").explicitlyRegisterStores([b("VideoComposerPremiereStore")]);var a=b("React").createElement(b("ScheduleLiveVideoDialog.react"),{broadcastID:undefined,canAddLiveAnnouncementThumbnail:this.props.isEpisode,description:this.props.description,initialPublishDate:undefined,isPageTarget:!0,isPremiere:!0,showCrosspostWarning:!1,targetID:this.props.pageID,timezoneStr:this.$23(),onSubmit:function(a,c,d,e){return b("VideoComposerDialogActions").premiereConfirm(new Date(a*1e3),c,d,e)}});a=b("ReactDOM").render(a,b("ReactDOM").findDOMNode(this.refs.premiereDialogPlaceholder));a.show instanceof Function&&a.show()};a.prototype.$23=function(){return b("AutoScheduleUtils").getTimezoneString()};a.prototype.$24=function(a){__p&&__p();var c=void 0,d=void 0;switch(a){case m.BACKDATE:case m.PUBLISH_NOW:case m.SCHEDULE:case m.PREMIERE:c=this.$2;d=this.$5;break;case m.SAVE_DRAFT:c=this.$3;d=this.$6;break;case m.AD_BREAK_SUBMIT_FOR_REVIEW:c=this.$4;d=this.$7;break;default:throw new Error("New footer action type not handled here!")}if(this.props.isShowVideoAndMissingType){b("VideoComposerDialogActions").highlightMissingVideoType(c);return}if(this.props.isMissingTitle){b("VideoComposerDialogActions").highlightTitleWithErrorTooltip(this.$1,d);return}if(a===m.PREMIERE&&!this.props.showInNewsFeed){b("VideoComposerDialogActions").highlightTitleWithErrorTooltip(this.$8,this.$9);return}if(a===m.PREMIERE&&this.props.videoDuration&&(this.props.videoDuration<30||this.props.videoDuration>=4*b("DateConsts").SEC_PER_HOUR)){b("VideoComposerDialogActions").highlightTitleWithErrorTooltip(this.$10,this.$11);return}if(this.props.isTitleTooLong){b("VideoComposerDialogActions").highlightTitleTooLong();return}switch(a){case m.AD_BREAK_SUBMIT_FOR_REVIEW:this.$13();break;case m.BACKDATE:this.$21();break;case m.PUBLISH_NOW:this.$16();break;case m.SAVE_DRAFT:this.$12();break;case m.SCHEDULE:this.$18();break;case m.PREMIERE:this.$22();break;default:throw new Error("new footer action type not handled here!")}};a.prototype.$15=function(a){b("VideoComposerDialogAdBreakActions").setPrereviewPostMethod(a),b("VideoComposerDialogAdBreakActions").setPrereviewDialog(!0)};a.prototype.$17=function(){this.$15(b("VideoComposerAdBreakPrereviewPostMethod").PUBLISH_NOW)};a.prototype.$19=function(){this.$15(b("VideoComposerAdBreakPrereviewPostMethod").SCHEDULE_POST)};a.prototype.$25=function(){return this.props.isPublishing||this.props.isSchedulingOrBackdating};a.prototype.$26=function(){return this.props.disablePublish||this.props.isSavingAsDraft||this.$25()||!this.props.bootloaded};a.prototype.$27=function(){return!this.$26()&&this.props.hasInsertedAdBreak&&this.props.isAdBreakPrereviewVisible};a.prototype.$14=function(){return this.$27()&&!b("SimpleNUXMessage").hasUserSeenMessage(b("SimpleNUXMessageTypes").AD_BREAK_PREREVIEW_DIALOG)};a.prototype.render=function(){__p&&__p();var a=this.$25(),c=this.$26(),d=this.$27(),e=b("React").createElement(b("XUIButton.react"),{className:"_2cpj _3-9a",href:"#",image:this.props.isSavingAsDraft?b("React").createElement(b("XUISpinner.react"),null):null,size:"xlarge",label:h._("\u4fdd\u5b58\u8349\u7a3f"),labelIsHidden:this.props.isSavingAsDraft,onClick:function(){return this.$24(m.SAVE_DRAFT)}.bind(this),disabled:c}),f=this.props.hasInsertedAdBreak?null:h._("\u89c6\u9891\u9700\u8981\u542f\u7528\u5e7f\u544a\u63d2\u64ad\u624d\u80fd\u63d0\u4ea4\u5ba1\u6838");f=b("React").createElement("div",null,b("React").createElement(b("VideoComposerAdBreakPrereviewButtonNux.react"),{contextRef:function(){return this.refs.adBreakPrereview}.bind(this),isVisible:this.props.isAdBreakPrereviewVisible}),b("React").createElement(b("XUIButton.react"),babelHelpers["extends"]({ref:"adBreakPrereview"},b("Tooltip").propsFor(f,"above"),{className:"_p2g _3-9a",onClick:function(){return this.$24(m.AD_BREAK_SUBMIT_FOR_REVIEW)}.bind(this),href:"#",size:"xlarge",label:h._("\u63d0\u4ea4\u5ba1\u6838"),disabled:!d})));d=h._("\u6392\u671f");var g=h._("\u5012\u8bbe\u65e5\u671f");d=b("React").createElement(b("ReactXUIMenu"),{className:"_1qnj"},b("React").createElement(l,{"data-testid":b("VideoComposerWebdriverTestDataIDs").VIDEO_PUBLISH_NOW_BUTTON,onclick:function(){return this.$24(m.PUBLISH_NOW)}.bind(this)},h._("\u7acb\u5373\u53d1\u5e03")),this.$28(),b("React").createElement(l,{onclick:function(){return this.$24(m.SCHEDULE)}.bind(this)},d),b("React").createElement(l,{onclick:function(){return this.$24(m.BACKDATE)}.bind(this)},g));g=b("React").createElement(b("PopoverMenu.react"),{className:"_3-9a",alignh:"right",position:"above",alignv:"baseline",menu:d,disabled:c},b("React").createElement(b("XUIPopoverButton.react"),{className:"_2cqv","data-testid":b("VideoComposerWebdriverTestDataIDs").VIDEO_PUBLISH_MENU_BUTTON,haschevron:!a,href:"#",image:a?b("React").createElement(b("XUISpinner.react"),{background:"dark"}):null,use:"confirm",size:"xlarge",label:h._("\u53d1\u5e03"),labelIsHidden:a,disabled:c}));return b("React").createElement("div",null,b("React").createElement("div",{ref:"premiereDialogPlaceholder"}),b("React").createElement(b("FlexLayout.react"),{direction:"horizontal"},this.props.boostedPostButtonConfig?b("React").createElement(b("ReactComposerBoostedPostLazyButton.react"),babelHelpers["extends"]({},this.props.boostedPostButtonConfig,{size:"xlarge",reactComposerID:this.props.composerID})):null,e,b("React").createElement("div",{ref:"adBreakPrereview"},this.props.isAdBreakPrereviewVisible?f:null),g),b("React").createElement(b("VideoComposerSaveAsDraftPrompt.react"),{shown:this.props.saveAsDraftDialogShown}),this.props.showReviewableBrandedContentConfirmationDialog&&b("React").createElement(b("CreateReviewableBCWhitelistInterceptDialog.react"),{onHide:b("VideoComposerDialogActions").hideReviewableBrandedContentConfirmation,onSubmit:b("VideoComposerDialogActions").confirmReviewableBrandedContent}),b("React").createElement(b("VideoComposerAdBreakPrereviewConfirmation.react"),{isDialogOpen:this.props.isAdBreakPrereviewDialogOpen,postMethod:this.props.adBreakPrereviewPostMethod,skipAndPublishNow:b("VideoComposerDialogActions").publishPost,skipAndSchedulePost:this.$20}))};a.prototype.$28=function(){if(!this.props.showPremiereOption)return null;var a=h._("\u9996\u64ad"),c=this.props.enablePollsForPremiere||!this.props.hasPolls,d=c?null:h._("Premiere videos can't include polls. Remove any polls to publish your video.");return b("React").createElement(l,babelHelpers["extends"]({disabled:!c,"data-testid":b("PublishingToolsWebdriverTestDataIDs").PUBLISH_PREMIERE_BUTTON,onclick:function(){return this.$24(m.PREMIERE)}.bind(this)},b("Tooltip").propsFor(d,"left")),a)};a.prototype.$29=function(a,c){return b("React").createElement(b("XUIPopoverButton.react"),{size:"xlarge",use:"confirm",label:"menu",className:"_4z7l",labelIsHidden:!0,disabled:a,haschevron:!c,image:c?b("React").createElement(b("XUISpinner.react"),{background:"dark"}):null})};e.exports=a}),null);